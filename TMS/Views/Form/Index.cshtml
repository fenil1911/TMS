@using Kendo.Mvc.UI
@{ Layout = "~/Views/Shared/_Layout.cshtml";

    @Scripts.Render("~/bundles/kendo") }




            <div class="container-fluid">


                <div class="users-container @if (!TMS.Model.AccessPermission.Add) { <text>no-create-button</text> }" style="margin-top:80px ;margin-bottom:20px">
                    <h2 style="font-weight: bold; @if (!TMS.Model.AccessPermission.Add) { <text>margin-top: 0 ; margin-bottom:20px;</text> }">Forms</h2>
                    @if (TMS.Model.AccessPermission.Add)
                    {
                        @Html.ActionLink("Create New", "Create", "Form", null, new { @class = "btn btn-primary primaryCreateNew" })
                    }
                </div>
                <div class="">
                    <div class="row  ; white_box">


                        @(Html.Kendo().Grid<TMS.Model.FormModel>()
             .Name("EmpGrid")
            .Scrollable(s => s.Height("auto"))
            //.AutoBind()

            .Columns(columns =>
            {


                columns.Bound(p => p.Name).Title("Name").Width(150);
                columns.Bound(p => p.NavigateURL).Title("Navigate URL").Width(150);
                columns.Bound(p => p.FormAccessCode).Title("FormAccess Code").Width(150);

                columns.Bound(p => p.IsActive)
               .Title("Active")
               .Width(100)
              .ClientTemplate(
        "# if (IsActive) { #" +
            "<div class=\"img-circle\" style=\"display: flex; justify-content: center; align-items: center;\"><img src=\"/Content/images/check.png\" alt=\"editok\" width=\"18\"></div>" +
        "# } else { #" +
            "<div class=\"\" style=\"display: flex; justify-content: center; align-items: center;\"><img src=\"/Content/images/uncheck.png\" alt=\"edit\" width=\"18\"></div>" +
        "# } #"
    );
                columns.Bound(p => p.ParentFormId).Title("ParentForm Id").Width(120);
                columns.Bound(p => p.DisplayOrder).Title("Display Order").Width(120);
                columns.Bound(p => p.IsDisplayMenu).Title("Display Menu").Width(120).ClientTemplate(
        "# if (IsActive) { #" +
            "<div class=\"img-circle\" style=\"display: flex; justify-content: center; align-items: center;\"><img src=\"/Content/images/check.png\" alt=\"editok\" width=\"18\"></div>" +
        "# } else { #" +
            "<div class=\"\" style=\"display: flex; justify-content: center; align-items: center;\"><img src=\"/Content/images/uncheck.png\" alt=\"edit\" width=\"18\"></div>" +
        "# } #"
    );
                columns.Bound(p => p.Id).ClientTemplate(

                    "#if ('" + TMS.Model.AccessPermission.Edit + "'=='True') {#"
                    + " <a href='" + Url.Action("create", "Form") + "/#=Id#'>  Edit  </a>"
                    + "#}#"
                    + "#if ('" + TMS.Model.AccessPermission.Delete + "'=='True') {#"
                    + " | <a href='" + Url.Action("Delete", "Form") + "/#=Id#' onclick='return confirm(\"Are you sure you want to delete this item?\")'>  Delete </a>"

                    + "#}#"
                    ).Width(150).Title("Action").Filterable(false);




            }).HtmlAttributes(new { style = "" })
    .Scrollable()
    .Pageable(pageable => pageable
        .Refresh(true)
        .PageSizes(true)
        )
    .Sortable()
    
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(10)
        .Read(read => read.Action("GetGridData", "Form"))



          )
          )
                    </div>

                </div>

                <script>
                    //$(document).ready(function () {
                    //    $('#EmpGrid').data('kendoGrid').dataSource.read();
                    //    $('#EmpGrid').data('kendoGrid').refresh();

                    //});
                </script>

                @*

            @model  IEnumerable<TMS.Model.FormModel>
                @using PagedList.Mvc;
                @using PagedList;

                @{
                    ViewBag.Title = "Index";
                }
                <br>
                <br />
                <br>
                <br />

                <h2 style="font-size: 44px; margin-top: 35px; margin-bottom: -84px; margin-left: -165px; font-family: 'Segoe UI Symbol'; font-weight: bold ">Form Index</h2>


                <br />
                <br />
                <p>

                    @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-primary primaryCreateNew" })
                </p>

                <br />
                <table class="table ticketall table-bordered table-hover">
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.Name)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.NavigateURL)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ParentFormId)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.FormAccessCode)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.DisplayOrder)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.IsActive)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.IsDisplayMenu)
                        </th>
                        <th>
                            @Html.DisplayName("Action")
                        </th>

                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.NavigateURL)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ParentFormId)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.FormAccessCode)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DisplayOrder)
                            </td>
                            <td>
                                @if (@item.IsActive)
                                {<div class="img-circle"><img src="~/Content/images/check.png" alt="editok" width="18"></div>}
                                else
                                { <div class=""><img src="~/Content/images/delete.png" alt="edit" width="18"></div>}

                            </td>
                            <td>
                                @if (@item.IsActive)
                                {<div class="img-circle"><img src="~/Content/images/check.png" alt="editok" width="18"></div>}
                                else
                                { <div class=""><img src="~/Content/images/delete.png" alt="edit" width="18"></div>}
                            </td>

                            <td>
                                <a href="@Url.Action("Create", "Form", new { Id = item.Id })"><img src="~/Content/images/draww.png" alt="edit" width="21"></a>
                                <a href="@Url.Action("delete", "Form", new { Id = item.Id }) " onclick="return confirm('Are you sure to Delete?')"><img src="~/Content/images/deletee.png" alt="edit" width="21"></a>


                            </td>
                        </tr>
                    }

                </table>

                *@
