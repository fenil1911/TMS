@model TMS.Model.AccountModel.ForgotPasswordModel
@{
    ViewBag.Title = "ForgotPassword";
    Layout = null;
}

<link rel="icon" href="~/favicont.ico">
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/style.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.4.1.min.js"></script>

<div class="container">
    <h3>Forgot Password</h3>
    <form id="form" class="needs-validation" enctype="multipart/form-data">
        <div class="form-horizontal">
            <hr />
            <div class="text-success" id="successmsg" style="display:none">
                Reset password link has been sent to your email id.
            </div>
            <div class="text-danger" id="failemsg" style="display:none">
                Account Not Found.
            </div>
            <div class="form-group col-md-4">
                <label class="control-label col-lg-4">Email ID</label>
                <br />
                @Html.TextBox("EmailId", "", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.EmailId, "", new { @class = "text-danger" })
            </div>
            <div class="form-group" style="padding-top:7em;">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Submit" class="btn btn-primary" />
                </div>
            </div>
        </div>
    </form>
</div>

@Scripts.Render("~/bundles/jqueryval")


<script>
    $('#form').submit(function (e) {
        //;
        e.preventDefault();
        var $form = $(this);
        // ;
        // check if the input is valid using a 'valid' property
        if ($("#EmailId").val()) {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                url: '/Account/ForgotPassword',
                data: {
                    EmailId: $('#EmailId').val()
                },

                success: function (data) {

                    console.log(data);
                    if (data == true) {
                        $(".text-success").show();
                        $(".text-danger").hide();
                    }
                    else if (data == false) {
                        $(".text-success").hide();
                        $(".text-danger").show();
                        $("#EmailId").val('');
                    }
                },
            });
        }
        else {
            return false;
        }
    });

</script>
