@model TMS.Model.AccountModel.ResetPasswordModel
@{
    ViewBag.Title = "Reset Password";
    Layout = null;
}
<title>Reset Password</title>
<link rel="icon" href="~/favicont.ico">
<link href="~/Content/style.css" rel="stylesheet" />
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

<body style="background-color: #EAEAEA">
    <div class="white_box" style="margin-top: 80px; margin-left: 150px; margin-right: 150px;">
        <div class="container">

            <form id="form" class="needs-validation" novalidate enctype="multipart/form-data">

                @Html.AntiForgeryToken()
                <div>

                    <h2 style="margin: 17px 5px; font-weight:bold; color:#fe6601">Reset Password</h2>
                </div>
                <div class="form-horizontal">
                    <hr />

                    <div class="text-success" id="successmsg" style="display:none">
                        New password updated successfully.
                    </div>
                    <div class="text-danger" id="failemsg" style="display:none">
                        Something invalid.
                    </div>
                </div>
                <div class="form-group">
                    <div class="row col">



                        <div class="col-md-6">
                            <label class="form-label labelform">New Password<strong style="color:red ">*</strong></label>

                            @Html.EditorFor(model => model.NewPassword, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.NewPassword, "", new { @class = "text-danger" })
                        </div>

                        <div class="col-md-6">
                            <label class="form-label labelform">Confirm Password<strong style="color:red ">*</strong></label>

                            @Html.EditorFor(model => model.ConfirmPassword, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.ConfirmPassword, "", new { @class = "text-danger" })
                        </div>
                    </div>


                    <div class="form-group">
                        @Html.HiddenFor(a => a.ResetCode)
                    </div>

                    <br />
                    <div class="row">
                        <div class="col-md-4" style="">
                            <label for="">&nbsp;&nbsp;</label>
                            <div class="input_box">
                                <button type="submit" class="btn btn-primary btn-md" id="#btnforms" style="margin-top: 0px;">Submit</button>
                                <a href="@Url.Action("Login", "Account")" class="btn btn-danger float-right right btn-md">Cancel</a>
                            </div>
                        </div>
                    </div>

                </div>

            </form>

        </div>
    </div>
</body>


@Scripts.Render("~/bundles/jqueryval")

<script>
    $('#form').submit(function (e) {

        e.preventDefault();
        var $form = $(this);
        //` ;
        // check if the input is valid using a 'valid' property
        if (!$form.valid) return false;
        var data = $form.serialize();

        $.ajax({
            type: 'POST',
            url: '/Account/ResetPassword',
            data: data,

            success: function (data) {
                if (data.success) {
                    $("#successmsg").show();
                    $("#failemsg").hide();
                    window.location.href = data.redirectUrl;
                } else {
                    $("#successmsg").hide();
                    $("#failemsg").show();
                }
            },

        });

    });

</script>
